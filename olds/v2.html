<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulasi Penyiraman Media Tanam Aglaonema</title>
    <link rel="icon" type="image/x-icon" href="asset/favicon.png">
    <link rel="stylesheet" href="../asset/npm/bootstrap/5.3.0-alpha1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../asset/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../asset/font-googleapis/css2.css">
    <script type="text/javascript" src="../asset/scripts/jquery-3.6.0.min.js"></script>    
    <link rel="stylesheet" href="../asset/style-v2.css">
</head>
<body class="material-typography">
    <!-- Loading Spinner -->
    <div class="loading-spinner" id="loadingSpinner">
        <div class="spinner"></div>
    </div>

    <!-- Snackbar -->
    <div class="snackbar" id="snackbar"></div>

    <!-- Toast -->
    <div class="toast" id="toast">
        <div class="toast-header">
            <h6 class="toast-title" id="toastTitle"></h6>
            <button class="toast-close" id="toastClose">&times;</button>
        </div>
        <p id="toastMessage"></p>
    </div>

    <!-- Aglaonema leaf pattern background -->
    <div class="aglaonema-pattern"></div>

    <!-- Animasi tanaman Aglaonema -->
    <div class="aglaonema-floating">
        <div class="aglaonema-realistic">
            <div class="aglaonema-real-leaf real-leaf-1"></div>
            <div class="aglaonema-real-leaf real-leaf-2"></div>
            <div class="aglaonema-real-leaf real-leaf-3"></div>
            <div class="aglaonema-real-leaf real-leaf-4"></div>
            <div class="aglaonema-real-leaf real-leaf-5"></div>
            <div class="aglaonema-real-pot"></div>
        </div>
    </div>

    <!-- Custom Alert -->
    <div class="custom-alert" id="customAlert">
        <div class="alert-header">
            <h5 id="alertTitle"></h5>
            <button class="alert-close" id="alertClose">&times;</button>
        </div>
        <p id="alertMessage"></p>
        <div>
            <button id="alertConfirm" class="btn btn-primary">OK</button>
        </div>
    </div>

    <!-- Custom Prompt -->
    <div class="custom-prompt" id="customPrompt">
        <div class="prompt-header">
            <h5 id="promptTitle"></h5>
            <button class="prompt-close" id="promptClose">&times;</button>
        </div>
        <p id="promptMessage"></p>
        <input type="text" class="form-control" id="promptInput">
        <div class="text-right mt-3">
            <button id="promptConfirm" class="btn btn-primary">OK</button>
            <button id="promptCancel" class="btn btn-outline-primary">Batal</button>
        </div>
    </div>

    <!-- Custom Confirm -->
    <div class="custom-confirm" id="customConfirm">
        <div class="confirm-header">
            <h5 id="confirmTitle"></h5>
            <button class="confirm-close" id="confirmClose">&times;</button>
        </div>
        <p id="confirmMessage"></p>
        <div>
            <button id="confirmYes" class="btn btn-primary">Ya</button>
            <button id="confirmNo" class="btn btn-outline-primary">Tidak</button>
        </div>
    </div>

    <!-- Modal untuk pesan -->
    <div class="custom-modal material-modal" id="messageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h5 id="modalTitle" class="modal-title"></h5>
                <button class="close-btn" id="modalClose">&times;</button>
            </div>
            <div class="modal-body">
                <p id="modalMessage"></p>
            </div>
            <div class="modal-footer">
                <button id="modalCloseBtn" class="btn btn-primary">Tutup</button>
            </div>
        </div>
    </div>

    <!-- Modal untuk simpanan -->
    <div class="custom-modal material-modal" id="savedModal">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Komposisi Tersimpan</h5>
                <button class="close-btn" id="savedModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="saved-compositions" id="savedCompositionsList">
                    <!-- Daftar simpanan akan diisi dengan JavaScript -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="savedModalCloseBtn" class="btn btn-primary">Tutup</button>
            </div>
        </div>
    </div>

    <!-- Modal untuk import komposisi -->
    <div class="custom-modal material-modal" id="importCompositionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Import Komposisi Media Tanam</h5>
                <button class="close-btn" id="importCompositionModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <label class="form-label">Pilih file JSON komposisi media tanam:</label>
                    <input type="file" id="importCompositionFile" class="form-control" accept=".json">
                </div>
            </div>
            <div class="modal-footer">
                <button id="importCompositionConfirm" class="btn btn-primary">Import</button>
                <button id="importCompositionModalCloseBtn" class="btn btn-outline-primary">Batal</button>
            </div>
        </div>
    </div>

    <div class="header header-gradient text-center mb-5">
        <div class="container">
            <h1><i class="fas fa-leaf me-2"></i>Simulasi Penyiraman Media Tanam Aglaonema</h1>
            <p class="lead">Analisis porositas, retensi air, dan drainase untuk media tanam optimal</p>
        </div>
        <div class="plant-decoration">
            <svg viewBox="0 0 100 100">
                <path d="M50,10 C60,20 65,35 60,50 C55,65 45,70 50,80 C55,90 65,85 70,75 C75,65 80,50 75,35 C70,20 60,15 50,10 Z" />
                <path d="M50,80 L50,95" stroke-width="3" />
                <path d="M40,60 L30,70" stroke-width="2" />
                <path d="M60,60 L70,70" stroke-width="2" />
            </svg>
        </div>
    </div>

    <div class="container">
        <!-- Card BAHAN BAKU TERSEDIA -->
        <div class="card elevation-2 card-hover mb-4">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-seedling me-2"></i>BAHAN BAKU TERSEDIA</h5>
            </div>
            <div class="card-body">
                <div class="dropdown-wrapper">
                    <div class="material-dropdown">
                        <button class="dropdown-toggle" type="button" id="materialDropdownButton">
                            <span id="selected-material-text">Pilih Bahan Baku</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="dropdown-menu" id="materialDropdownMenu">
                            <!-- Daftar bahan akan diisi dengan JavaScript -->
                        </div>
                    </div>
                    <button id="add-selected-material" class="add-material-btn" title="Tambah ke Komposisi">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Panel Komposisi dan Simulasi -->
        <div class="card elevation-2 card-hover">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0"><i class="fas fa-list-ul me-2"></i>KOMPOSISI MEDIA TANAM</h5>
                <div class="composition-actions">
                    <button id="export-composition" class="btn btn-sm btn-outline-light me-1">
                        <i class="fas fa-download me-1"></i>Export
                    </button>
                    <button id="import-composition" class="btn btn-sm btn-outline-light">
                        <i class="fas fa-upload me-1"></i>Import
                    </button>
                </div>
            </div>
            <div class="card-body">
                <div id="composition-list">
                    <p class="text-center text-muted p-4">Tambahkan bahan dari dropdown di atas untuk memulai</p>
                </div>
                <div class="divider"></div>
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <strong>Total Bagian: <span id="total-percentage">0</span></strong>
                    </div>
                    <div class="action-buttons">
                        <button id="save-composition" class="btn btn-sm btn-outline-primary me-1">
                            <i class="fas fa-save me-1"></i>Simpan
                        </button>
                        <button id="view-saved" class="btn btn-sm btn-outline-primary me-1">
                            <i class="fas fa-folder me-1"></i>Lihat Simpanan
                        </button>
                        <button id="reset-composition" class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-redo me-1"></i>Reset
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Card PENGATURAN POT -->
        <div class="card elevation-2 card-hover mb-4">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-cogs me-2"></i>PENGATURAN POT</h5>
            </div>
            <div class="card-body">
                <div class="pot-settings-row">
                    <div class="pot-settings-group">
                        <label class="form-label">Diameter Pot (cm)</label>
                        <input type="number" class="form-control" id="pot-diameter" value="9.5" min="1" step="0.1">
                    </div>
                    <div class="pot-settings-group">
                        <label class="form-label">Tinggi Pot (cm)</label>
                        <input type="number" class="form-control" id="pot-height" value="9.5" min="1" step="0.1">
                    </div>
                    <div class="pot-settings-group">
                        <label class="form-label">Media dalam Pot (%)</label>
                        <input type="number" class="form-control" id="media-percentage" value="95" min="1" max="100" step="0.1">
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Card SIMULASI PENYIRAMAN -->
        <div class="card elevation-2 mt-4 card-hover simulation-card">
            <div class="card-header">
                <h5 class="mb-0"><i class="fas fa-tint me-2"></i>SIMULASI PENYIRAMAN</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <div class="watering-controls mb-4">
                            <div class="watering-control-group">
                                <label class="form-label">Volume Air</label>
                                <div class="water-input-group">
                                    <input type="number" class="form-control" id="water-volume-input" min="0" max="5000" value="1000" step="0.1">
                                    <span>mL</span>
                                </div>
                            </div>
                            
                            <div class="watering-control-group">
                                <label class="form-label">Durasi Penyiraman</label>
                                <div class="water-input-group">
                                    <input type="number" class="form-control duration-input" id="watering-duration-input" value="20" min="1" max="600" step="0.1">
                                    <span>detik</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="d-grid gap-2">
                            <button id="run-simulation" class="btn btn-primary btn-material">
                                <i class="fas fa-play me-1"></i>Jalankan Simulasi
                            </button>
                            <button id="reset-simulation" class="btn btn-outline-primary btn-material">
                                <i class="fas fa-undo me-1"></i>Reset Simulasi
                            </button>
                            <button id="export-simulation" class="btn btn-outline-primary btn-material">
                                <i class="fas fa-download me-1"></i>Export Hasil Simulasi
                            </button>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="pot-container">
                            <div class="pot">
                                <div class="watering-animation" id="watering-animation"></div>
                                <div class="pot-rim"></div>
                                <div class="pot-body">
                                    <div class="pot-shine"></div>
                                    <div class="media-composition" id="media-composition"></div>
                                    <div class="water-level" id="water-level" style="height: 0%">
                                        <div class="water-waves"></div>
                                    </div>
                                </div>
                                <div class="pot-base"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-4">
                    <div class="col-md-6">
                        <div class="card result-card elevation-1" id="simulation-result" style="display: none;">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-chart-bar me-2"></i>Hasil Simulasi</h5>
                            </div>
                            <div class="card-body">                                
                                <div class="result-item">
                                    <i class="fas fa-tint"></i>
                                    <div>
                                        <label>Volume Air yang Digunakan:</label>
                                        <h5 id="water-volume">0 mL</h5>
                                    </div>
                                </div>
                                
                                <div class="result-item">
                                    <i class="fas fa-clock"></i>
                                    <div>
                                        <label>Durasi Penyiraman:</label>
                                        <h5 id="watering-duration">0 detik</h5>
                                    </div>
                                </div>
                                
                                <div class="result-item">
                                    <i class="fas fa-flask"></i>
                                    <div>
                                        <label>Volume Pot:</label>
                                        <h5 id="pot-volume">0 mL</h5>
                                    </div>
                                </div>
                                
                                <div class="result-item">
                                    <i class="fas fa-box"></i>
                                    <div>
                                        <label>Volume Media:</label>
                                        <h5 id="media-volume">0 mL</h5>
                                    </div>
                                </div>
                                
                                <div class="result-item">
                                    <i class="fas fa-water"></i>
                                    <div>
                                        <label>Air yang Tertahan di Media:</label>
                                        <h5 id="retained-water-value">0 mL</h5>
                                    </div>
                                </div>
                                
                                <div class="result-item">
                                    <i class="fas fa-absorb"></i>
                                    <div>
                                        <label>Air yang Terserap Media:</label>
                                        <h5 id="absorbed-water-percentage">0%</h5>
                                    </div>
                                </div>
                                
                                <div class="result-item">
                                    <i class="fas fa-faucet"></i>
                                    <div>
                                        <label>Air yang Mengalir Keluar:</label>
                                        <h5 id="drained-water-value">0 mL</h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card media-properties-card elevation-1" id="media-properties" style="display: none;">
                            <div class="card-header">
                                <h5 class="mb-0"><i class="fas fa-vial me-2"></i>Sifat Media Campuran (Rata-rata Tertimbang)</h5>
                            </div>
                            <div class="card-body">
                                <div class="media-property">
                                    <i class="fas fa-tint"></i>
                                    <span>Retensi Media: <span id="avg-retention">0%</span></span>
                                </div>
                                <div class="media-property">
                                    <i class="fas fa-water"></i>
                                    <span>Drainase Media: <span id="avg-drainage">0%</span></span>
                                </div>
                                <div class="media-property">
                                    <i class="fas fa-wind"></i>
                                    <span>Porositas Media: <span id="avg-porosity">0%</span></span>
                                </div>
                                <div class="media-property">
                                    <i class="fas fa-vial"></i>
                                    <span>pH Media: <span id="avg-ph">0</span></span>
                                </div>
                                <div class="media-property">
                                    <i class="fas fa-exchange-alt"></i>
                                    <span>CEC Media: <span id="avg-cec">0 meq/100g</span></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card analysis-card elevation-1 mt-4" id="analysis-card" style="display: none;">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-robot me-2"></i>Analisis Media & Rekomendasi</h5>
                    </div>
                    <div class="card-body">
                        <div id="analysis-content">
                            <!-- Analisis akan diisi dengan JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer text-center mt-5">
        <div class="container">
            <p class="mb-0">Aplikasi Simulasi Penyiraman Media Tanam Aglaonema &copy; 2025</p>
        </div>
    </div>

    <script type="text/javascript" src="../asset/scripts/simulator-v2.js"></script>
</body>
</html>